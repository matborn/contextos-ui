{"openapi":"3.1.0","info":{"title":"Core Graph API","description":"**Knowledge Graph Platform** for extracting, governing, and querying structured knowledge from unstructured content.\n\nThis API provides:\n\n- **Ontology Management**: Define and evolve Entity Types, Relation Types, and Event Types that govern how LLMs extract and structure information from knowledge sources\n- **Knowledge Ingestion**: Upload knowledge sources for automated extraction of entities, relationships, and events using LLM pipelines\n- **Human-in-the-Loop Governance**: Review and approve Ontology suggestions generated during extraction to maintain schema quality\n- **Graph Views**: Query materialized subgraphs filtered by ownership, privacy, and use-case-specific perspectives\n- **Sharing & Security**: Fine-grained control over who can access specific entities and relationships\n\n**Key Concepts**:\n\n- The **Ontology** (schema-as-data) evolves dynamically as the platform discovers new concepts, enabling organic growth without schema migrations\n- **Entity Types** and **Relation Types** directly feed LLM prompts to guide extraction quality and consistency\n- **Type Suggestions** capture novel concepts discovered during extraction, awaiting admin approval before incorporation\n- All knowledge is stored as a unified **Graph**, supporting complex traversals and semantic queries\n\nStart with `/api/v1/ontology/entity-types` to explore or define the schema, then ingest knowledge sources via `/api/v1/knowledge-sources`.","version":"0.1.0"},"paths":{"/api/v1/ontology/entity-types":{"get":{"tags":["Ontology"],"summary":"List Entity Types in the Ontology","description":"**Retrieve entity type definitions** that govern how the platform extracts and structures entities from knowledge sources.\n\n**Why use this**: Entity types form the vocabulary that LLMs use during extraction. Each type includes descriptions, synonyms, and scope notes that guide extraction quality. For example, defining a 'Feature' entity type with clear boundaries helps the LLM distinguish features from bugs or tasks.\n\n**Common workflows**:\n- Browse the current schema before ingesting knowledge sources to understand what can be extracted\n- Filter by namespace (e.g., 'core.product', 'acme.support') to view domain-specific types\n- Check status='active' to see only types currently used in extraction prompts\n\nEntity types evolve over time as new concepts are discovered during extraction, enabling organic schema growth.","operationId":"list_entity_types_api_v1_ontology_entity_types_get","parameters":[{"name":"namespace","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter entity types to a namespace (e.g. core.product).","title":"Namespace"},"description":"Filter entity types to a namespace (e.g. core.product)."},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/OntologyStatus"},{"type":"null"}],"description":"Filter by lifecycle status (active|draft|archived).","title":"Status"},"description":"Filter by lifecycle status (active|draft|archived)."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Maximum number of entity types to return.","default":100,"title":"Limit"},"description":"Maximum number of entity types to return."},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Zero-based offset for pagination.","default":0,"title":"Offset"},"description":"Zero-based offset for pagination."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/EntityType"}},"title":"Response List Entity Types Api V1 Ontology Entity Types Get"}}}},"404":{"description":"Resource not found"},"422":{"description":"Validation error"}}},"post":{"tags":["Ontology"],"summary":"Define or update an Entity Type","description":"**Create or modify an entity type** that governs how entities are extracted from knowledge sources and stored in the knowledge graph.\n\n**Why define entity types**: The ontology directly feeds LLM extraction prompts. When you define a 'Person' entity type with a description like 'An individual human with a name and optional role', the LLM uses that guidance to identify and classify people mentioned in knowledge sources. Clear descriptions, synonyms, and scope notes improve extraction accuracy.\n\n**Common use cases**:\n- Add domain-specific types (e.g., 'CustomerSegment', 'SLA', 'Escalation Policy') before ingesting knowledge sources in that domain\n- Refine existing types by adding synonyms (e.g., 'Capability' as a synonym for 'Feature') to improve matching\n- Set status='draft' for experimental types or 'archived' to retire deprecated concepts\n\nThe `id` is auto-generated from the name if omitted. All entity instances in the graph link back to their EntityType definition.","operationId":"upsert_entity_type_api_v1_ontology_entity_types_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EntityType"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EntityType"}}}},"404":{"description":"Resource not found"},"422":{"description":"Validation error"}}}},"/api/v1/ontology/relation-types":{"get":{"tags":["Ontology"],"summary":"List Relation Types in the Ontology","description":"**Retrieve relation type definitions** that specify how entities can be connected in the knowledge graph.\n\n**Why use this**: Relation types define the predicates (e.g., OWNS, HAS_REQUIREMENT, ASSIGNED_TO) that LLMs extract from text. Each relation type specifies which entity types it can connect (via connectsFrom/connectsTo), enabling type-safe relationship extraction and validation.\n\n**Common workflows**:\n- Review available predicates before querying the graph to understand possible traversals\n- Filter by domain (e.g., 'product', 'org') to see relationships relevant to specific use cases\n- Check connectsFrom/connectsTo constraints to understand valid relationship patterns\n\nRelations form the edges of the knowledge graph, enabling semantic queries like 'find all Features OWNED_BY a specific Person'.","operationId":"list_relation_types_api_v1_ontology_relation_types_get","parameters":[{"name":"domain","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional domain filter (e.g. product, org).","title":"Domain"},"description":"Optional domain filter (e.g. product, org)."},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/OntologyStatus"},{"type":"null"}],"description":"Filter by lifecycle status (active|draft|archived).","title":"Status"},"description":"Filter by lifecycle status (active|draft|archived)."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Maximum number of relation types to return.","default":100,"title":"Limit"},"description":"Maximum number of relation types to return."},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Zero-based offset for pagination.","default":0,"title":"Offset"},"description":"Zero-based offset for pagination."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/RelationType"}},"title":"Response List Relation Types Api V1 Ontology Relation Types Get"}}}},"404":{"description":"Resource not found"},"422":{"description":"Validation error"}}},"post":{"tags":["Ontology"],"summary":"Define or update a Relation Type","description":"**Create or modify a relation type** that governs how entities are connected during knowledge source extraction.\n\n**Why define relation types**: When you define a relation like 'HAS_REQUIREMENT' with connectsFrom=['et_feature'] and connectsTo=['et_requirement'], the system can extract and validate that relationship from text (e.g., 'the login feature requires two-factor authentication'). This creates typed edges in the graph that enable structured queries.\n\n**Common use cases**:\n- Define domain-specific predicates (e.g., 'ESCALATES_TO', 'MENTIONS', 'SUPERSEDES') before ingesting knowledge sources\n- Specify entity type constraints to prevent invalid relationships (e.g., only Features can HAS_REQUIREMENT Requirement)\n- Use descriptive names in UPPERCASE_SNAKE_CASE convention for clarity in graph visualizations\n\nThe `id` is auto-generated if omitted. Relation types feed directly into LLM prompts to guide relationship extraction.","operationId":"upsert_relation_type_api_v1_ontology_relation_types_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RelationType"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RelationType"}}}},"404":{"description":"Resource not found"},"422":{"description":"Validation error"}}}},"/api/v1/ontology/event-types":{"get":{"tags":["Ontology"],"summary":"List Event Types in the Ontology","description":"**Retrieve event type definitions** that describe temporal facts and actions extracted from knowledge sources.\n\n**Why use this**: Event types capture things that happen at specific points in time (e.g., 'ApprovalEvent', 'DeploymentEvent'). Unlike static relationships, events have timestamps, actors, and targets, enabling temporal queries like 'when was this feature approved' or 'who deployed this service last week'.\n\n**Common workflows**:\n- Browse event types to understand what temporal facts can be extracted from knowledge sources\n- Check participantTypes to see which entity types typically appear as actors or targets in events\n- Filter by status to see active event types currently used in extraction\n\nEvents capture temporal facts with actor and target relationships, forming a temporal layer over the entity graph.","operationId":"list_event_types_api_v1_ontology_event_types_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/OntologyStatus"},{"type":"null"}],"description":"Filter by lifecycle status (active|draft|archived).","title":"Status"},"description":"Filter by lifecycle status (active|draft|archived)."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Maximum number of event types to return.","default":100,"title":"Limit"},"description":"Maximum number of event types to return."},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Zero-based offset for pagination.","default":0,"title":"Offset"},"description":"Zero-based offset for pagination."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/EventType"}},"title":"Response List Event Types Api V1 Ontology Event Types Get"}}}},"404":{"description":"Resource not found"},"422":{"description":"Validation error"}}},"post":{"tags":["Ontology"],"summary":"Define or update an Event Type","description":"**Create or modify an event type** that captures temporal actions and decisions from knowledge sources.\n\n**Why define event types**: Events represent things that happen at specific times with specific participants. For example, defining an 'ApprovalEvent' with participantTypes=['et_person', 'et_feature'] tells the LLM to extract approval decisions from text like 'Sarah approved the shared workspace feature on Feb 5', creating a timestamped fact in the graph.\n\n**Common use cases**:\n- Model domain-specific actions (e.g., 'IncidentEscalationEvent', 'PolicyChangeEvent', 'CustomerFeedbackEvent')\n- Specify participant types to guide extraction (e.g., only people can be actors in approval events)\n- Use clear descriptions to help LLMs distinguish similar events (e.g., 'approved' vs 'reviewed')\n\nThe `id` is auto-generated if omitted. Event types enable temporal reasoning and audit trails in the knowledge graph.","operationId":"upsert_event_type_api_v1_ontology_event_types_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventType"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventType"}}}},"404":{"description":"Resource not found"},"422":{"description":"Validation error"}}}},"/api/v1/ontology/suggestions":{"get":{"tags":["Ontology"],"summary":"List Ontology Suggestions awaiting review","description":"**Retrieve type suggestions** generated when the LLM encounters novel concepts during knowledge source extraction.\n\n**Why this matters**: As the platform ingests knowledge sources, it discovers entities, relations, and events that don't match existing ontology types. Instead of failing or guessing, the system creates suggestions that require human review. This human-in-the-loop workflow ensures schema quality while enabling organic ontology growth.\n\n**Common workflows**:\n- Regularly review pending suggestions to approve valuable new types or reject noise\n- Filter by status='pending' to see suggestions requiring decisions\n- Check proposedDescription to understand what the LLM found and why it suggested a new type\n\n**Example**: If knowledge sources mention 'escalation policy' but no matching EntityType exists, a suggestion is created with proposedName='EscalationPolicy' and status='pending', waiting for admin approval to become part of the ontology.","operationId":"list_suggestions_api_v1_ontology_suggestions_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/SuggestionStatus"},{"type":"null"}],"description":"Optional filter by suggestion status.","title":"Status"},"description":"Optional filter by suggestion status."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/TypeSuggestion"}},"title":"Response List Suggestions Api V1 Ontology Suggestions Get"}}}},"404":{"description":"Resource not found"},"422":{"description":"Validation error"}}}},"/api/v1/ontology/suggestions/{suggestion_id}/decision":{"post":{"tags":["Ontology"],"summary":"Approve, reject, or merge a Type Suggestion","description":"**Make a governance decision** on a suggested ontology type discovered during extraction.\n\n**Why this is critical**: Suggestions represent potential schema evolution. Your decision determines whether a new concept becomes part of the ontology, gets merged into an existing type, or is rejected as noise. This gate-keeping ensures the schema remains high-quality and useful.\n\n**Decision types**:\n- **approve**: Accept the suggestion, creating a new EntityType/RelationType/EventType that future extractions can use\n- **reject**: Dismiss the suggestion as invalid or irrelevant (e.g., the LLM hallucinated or misunderstood context)\n- **merge**: Map the suggested concept to an existing type (e.g., merge 'Capability' suggestion into existing 'Feature' type)\n\n**Impact**: Approved types immediately become available in LLM prompts for subsequent knowledge source ingestions. Rejected suggestions are archived. Merges trigger remapping of any raw extractions that used the suggested type.","operationId":"decide_on_suggestion_api_v1_ontology_suggestions__suggestion_id__decision_post","parameters":[{"name":"suggestion_id","in":"path","required":true,"schema":{"type":"string","description":"Identifier of the suggestion to moderate.","title":"Suggestion Id"},"description":"Identifier of the suggestion to moderate."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestionDecisionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TypeSuggestion"}}}},"404":{"description":"Resource not found"},"422":{"description":"Validation error"}}}},"/api/v1/knowledge-sources":{"get":{"tags":["Knowledge Ingestion"],"summary":"List knowledge sources","description":"Browse paginated knowledge sources visible to the caller with filters for status, source type, and title search. Each record includes per-stage progress across extraction → embedding → clustering → conflict checks so the UI can render the pipeline without extra calls.","operationId":"list_knowledge_sources_api_v1_knowledge_sources_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of knowledge sources to return (default 25, max 100).","default":25,"title":"Limit"},"description":"Maximum number of knowledge sources to return (default 25, max 100)."},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Zero-based offset for pagination.","default":0,"title":"Offset"},"description":"Zero-based offset for pagination."},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/KnowledgeSourceStatus"},{"type":"null"}],"description":"Filter by lifecycle status (queued|processing|done|error).","title":"Status"},"description":"Filter by lifecycle status (queued|processing|done|error)."},{"name":"sourceType","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by source type (e.g. \"upload\", \"slack\", \"email\").","title":"Sourcetype"},"description":"Filter by source type (e.g. \"upload\", \"slack\", \"email\")."},{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Case-insensitive search across knowledge source titles.","title":"Q"},"description":"Case-insensitive search across knowledge source titles."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Paginated list of knowledge sources and their ingestion progress.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeSourceListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Knowledge Ingestion"],"summary":"Create a knowledge source ingestion job","description":"**Submit any unit of content** (files, tickets, Slack threads, emails) for ingestion into your knowledge base.\n\n**What happens**: The content flows through extraction → vector embedding → clustering → conflict checks/materialization so its entities, relationships, and events become queryable graph data with AI findings. Ownership, visibility, and sensitivity controls propagate from the source to all derived knowledge.\n\n**Returns**: A knowledge source ID plus the initial queued status so you can poll the status endpoint while processing continues asynchronously.","operationId":"create_knowledge_source_api_v1_knowledge_sources_post","parameters":[{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeSourceCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeSourceCreateResponse"}}}},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}},"description":"Unprocessable Content"}}}},"/api/v1/knowledge-sources/{knowledge_source_id}/status":{"get":{"tags":["Knowledge Ingestion"],"summary":"Check ingestion status for a knowledge source","description":"**Monitor ingestion progress** for a single knowledge source. Each stage reports pending/processing/done/error across extraction, embedding, clustering, and conflict checks so you know when extracted knowledge is ready.\n\n**Privacy**: Only the creator (or owners via future sharing features) can fetch status. Errors will attach to the failed stage.","operationId":"get_knowledge_source_status_api_v1_knowledge_sources__knowledge_source_id__status_get","parameters":[{"name":"knowledge_source_id","in":"path","required":true,"schema":{"type":"string","description":"Knowledge source identifier returned by the creation endpoint.","title":"Knowledge Source Id"},"description":"Knowledge source identifier returned by the creation endpoint."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeSourceStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-sources/{knowledge_source_id}/events":{"get":{"tags":["Knowledge Ingestion"],"summary":"Stream ingestion status via Server-Sent Events","description":"Stream ingestion progress for a knowledge source. Each event includes stage states, heartbeat flags, and retry guidance so clients can fall back to polling when needed.","operationId":"stream_knowledge_source_events_api_v1_knowledge_sources__knowledge_source_id__events_get","parameters":[{"name":"knowledge_source_id","in":"path","required":true,"schema":{"type":"string","description":"Knowledge source identifier returned by the creation endpoint.","title":"Knowledge Source Id"},"description":"Knowledge source identifier returned by the creation endpoint."},{"name":"heartbeat_interval_seconds","in":"query","required":false,"schema":{"type":"integer","maximum":60,"minimum":1,"description":"Heartbeat interval to emit events while processing (seconds).","default":5,"title":"Heartbeat Interval Seconds"},"description":"Heartbeat interval to emit events while processing (seconds)."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Server-Sent Events stream of ingestion progress.","content":{"text/event-stream":{"schema":{"$defs":{"KnowledgeSourceStatus":{"description":"Lifecycle states for knowledge source ingestion and processing.","enum":["queued","processing","done","error"],"title":"KnowledgeSourceStatus","type":"string"},"StageProgress":{"description":"Detailed per-stage progress for streaming events.","properties":{"state":{"$ref":"#/$defs/StageStatus","description":"Lifecycle state of the stage."},"startedAt":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Startedat"},"finishedAt":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Finishedat"},"progressPct":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Optional progress percentage for long-running stages.","title":"Progresspct"}},"required":["state"],"title":"StageProgress","type":"object"},"StageStatus":{"description":"Per-stage lifecycle states for ingestion pipeline steps.","enum":["pending","processing","done","error"],"title":"StageStatus","type":"string"}},"description":"Server-sent event payload for knowledge source ingestion progress.","properties":{"knowledgeSourceId":{"title":"Knowledgesourceid","type":"string"},"status":{"$ref":"#/$defs/KnowledgeSourceStatus"},"stages":{"additionalProperties":{"$ref":"#/$defs/StageProgress"},"title":"Stages","type":"object"},"updatedAt":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"title":"Updatedat"},"heartbeat":{"default":true,"title":"Heartbeat","type":"boolean"},"retryAfterSeconds":{"default":15,"title":"Retryafterseconds","type":"integer"}},"required":["knowledgeSourceId","status","stages"],"title":"KnowledgeSourceEvent","type":"object"},"example":{"knowledgeSourceId":"ksrc_123","status":"processing","stages":{"extraction":{"state":"processing","startedAt":"2025-12-04T22:51:40.146796","progressPct":0},"embedding":{"state":"pending","progressPct":0},"clustering":{"state":"pending","progressPct":0},"conflictChecks":{"state":"pending","progressPct":0}},"updatedAt":"2025-12-04T22:51:40.146853Z","heartbeat":true,"retryAfterSeconds":10}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-sources/upload":{"post":{"tags":["Knowledge Ingestion"],"summary":"Create an upload slot for a knowledge source","description":"Request a presigned upload slot for binary ingestion. Returns an upload URL, token, and limits (allowed MIME types, size caps) so clients can upload before creating a knowledge source.","operationId":"create_upload_slot_api_v1_knowledge_sources_upload_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeSourceUploadRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeSourceUploadResponse"}}}},"422":{"description":"Unprocessable Content","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidationErrorResponse"}}}}}}},"/api/v1/share":{"post":{"tags":["Sharing"],"summary":"Share an Entity with another user","description":"**Grant access** to a specific entity or event in the knowledge graph.\n\n**Why use this**: By default, entities you extract from your knowledge sources remain private to you. Use sharing to collaborate - for example, share a 'Feature' entity with your product team, or share a 'Customer' with your sales team.\n\n**How it works**: Sharing updates the entity's visibility/ACL to include the target user. Once shared, that user can:\n- View the entity in graph queries and views\n- See relationships connected to that entity (subject to their own access rules)\n- Potentially re-share it, depending on permission levels (future enhancement)\n\n**Access control**: You must own the entity or have explicit permission to share it. Sharing is entity-specific - it doesn't grant access to the entire knowledge source or other extracted entities.","operationId":"share_entity_api_v1_share_post","parameters":[{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShareRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShareResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/staging/clusters":{"get":{"tags":["Staging"],"summary":"List staging clusters for a knowledge source","description":"Browse staging clusters with conflict details for a specific knowledge source.","operationId":"list_clusters_api_v1_staging_clusters_get","parameters":[{"name":"knowledgeSourceId","in":"query","required":true,"schema":{"type":"string","description":"Identifier of the knowledge source backing the clusters.","title":"Knowledgesourceid"},"description":"Identifier of the knowledge source backing the clusters."},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional cluster status filter (e.g. pending, promoted, rejected).","title":"Status"},"description":"Optional cluster status filter (e.g. pending, promoted, rejected)."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of clusters to return (default 50).","default":50,"title":"Limit"},"description":"Maximum number of clusters to return (default 50)."},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Zero-based offset for pagination.","default":0,"title":"Offset"},"description":"Zero-based offset for pagination."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StagingClusterListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/staging/clusters/{cluster_id}/promote":{"post":{"tags":["Staging"],"summary":"Promote a staging cluster","description":"Mark a staging cluster as promoted and materialize its items.","operationId":"promote_cluster_api_v1_staging_clusters__cluster_id__promote_post","parameters":[{"name":"cluster_id","in":"path","required":true,"schema":{"type":"string","title":"Cluster Id"}},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StagingClusterView"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/staging/clusters/{cluster_id}/reject":{"post":{"tags":["Staging"],"summary":"Reject a staging cluster","description":"Reject a staging cluster and mark conflicts as resolved without materialization.","operationId":"reject_cluster_api_v1_staging_clusters__cluster_id__reject_post","parameters":[{"name":"cluster_id","in":"path","required":true,"schema":{"type":"string","title":"Cluster Id"}},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StagingClusterView"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/views/features/{feature_id}/delivery":{"get":{"tags":["Feature Views"],"summary":"Get Feature Delivery View","description":"**Retrieve a delivery-focused subgraph** for a specific feature, pre-filtered for product planning use cases.\n\n**What you get**: A structured view containing:\n- The feature entity with all its properties\n- **Requirements**: What must be satisfied for delivery (HAS_REQUIREMENT relationships)\n- **Metrics**: Success criteria and measurements (HAS_METRIC relationships)\n- **Risks**: Blockers and concerns (HAS_RISK relationships)\n- **Ownership**: Who's responsible (OWNED_BY relationships)\n\n**Why views matter**: Rather than writing complex graph queries, views provide pre-defined, use-case-specific slices of the graph. The 'delivery view' is optimized for product managers tracking feature readiness - it shows exactly what's needed without extraneous relationships.\n\n**Privacy**: Only returns entities and relationships you have access to. If a requirement is owned by another user and not shared with you, it won't appear in this view.","operationId":"get_feature_delivery_view_api_v1_views_features__feature_id__delivery_get","parameters":[{"name":"feature_id","in":"path","required":true,"schema":{"type":"string","description":"Identifier of the feature entity to render the delivery view for.","title":"Feature Id"},"description":"Identifier of the feature entity to render the delivery view for."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeatureDeliveryView"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/entities":{"get":{"tags":["Entities"],"summary":"List canonical entities","description":"Retrieve paginated canonical entities that the caller can access. Filters allow UI clients to scope by EntityType, owner, domain, and apply case-insensitive search against names or captured attributes. Results respect the same visibility model used across views.","operationId":"list_entities_api_v1_entities_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of entities to return (default 25, max 100).","default":25,"title":"Limit"},"description":"Maximum number of entities to return (default 25, max 100)."},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Zero-based offset for pagination.","default":0,"title":"Offset"},"description":"Zero-based offset for pagination."},{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter entities by EntityType name (case-insensitive).","title":"Type"},"description":"Filter entities by EntityType name (case-insensitive)."},{"name":"ownerUserId","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Return entities owned by a specific user.","title":"Owneruserid"},"description":"Return entities owned by a specific user."},{"name":"domain","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Restrict results to entities tagged with a given domain.","title":"Domain"},"description":"Restrict results to entities tagged with a given domain."},{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Case-insensitive substring search across names and attributes.","title":"Q"},"description":"Case-insensitive substring search across names and attributes."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Paginated list containing summaries for each visible entity.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EntityListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/entities/{entity_id}":{"get":{"tags":["Entities"],"summary":"Fetch a canonical entity","description":"Return a canonical entity plus its security metadata when the caller is authorized. Use this endpoint to populate entity drawers or details in the Knowledge Base UI.","operationId":"get_entity_api_v1_entities__entity_id__get","parameters":[{"name":"entity_id","in":"path","required":true,"schema":{"type":"string","description":"Identifier of the canonical entity (e.g., feat_shared_workspaces).","title":"Entity Id"},"description":"Identifier of the canonical entity (e.g., feat_shared_workspaces)."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EntityDetail"}}}},"404":{"description":"Entity not found or not visible to the caller."},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge-base/insights":{"get":{"tags":["Knowledge Base"],"summary":"List Knowledge Base insights","description":"Paginate Knowledge Base insights with filters for type, status, and free-text search. Results include aggregated counts per status so the UI can render filter chips without extra round-trips.","operationId":"list_insights_api_v1_knowledge_base_insights_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Maximum number of insights to return per page (default 25).","default":25,"title":"Limit"},"description":"Maximum number of insights to return per page (default 25)."},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Zero-based offset for pagination.","default":0,"title":"Offset"},"description":"Zero-based offset for pagination."},{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by ontology EntityType (e.g., Requirement, Decision).","title":"Type"},"description":"Filter by ontology EntityType (e.g., Requirement, Decision)."},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Restrict to a lifecycle status such as new or verified.","title":"Status"},"description":"Restrict to a lifecycle status such as new or verified."},{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Case-insensitive substring search across content.","title":"Q"},"description":"Case-insensitive substring search across content."},{"name":"workspaceId","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter insights within a specific workspace context (optional).","title":"Workspaceid"},"description":"Filter insights within a specific workspace context (optional)."},{"name":"layer","in":"query","required":false,"schema":{"$ref":"#/components/schemas/InsightLayer","description":"Which layer to search (canonical|staging|exploratory).","default":"canonical"},"description":"Which layer to search (canonical|staging|exploratory)."},{"name":"sort","in":"query","required":false,"schema":{"$ref":"#/components/schemas/InsightSortOrder","description":"Sort order for the listing. confidence_desc favors higher scores, recency sorts by updated timestamps.","default":"confidence_desc"},"description":"Sort order for the listing. confidence_desc favors higher scores, recency sorts by updated timestamps."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InsightListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workspaces":{"get":{"tags":["Workspaces"],"summary":"List workspaces","description":"List workspaces visible to the caller with pagination, filtering, and sorting. Visibility is enforced: private workspaces are only visible to members/owners, protected/public are discoverable to org users. Health and lastActive may be null while the backend derives signals.","operationId":"list_workspaces_api_v1_workspaces_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"1-based page number.","default":1,"title":"Page"},"description":"1-based page number."},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Page size (max 100).","default":20,"title":"Pagesize"},"description":"Page size (max 100)."},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Sort order: lastActive, lastActive:asc, health, health:asc, name, name:desc. Defaults to lastActive desc.","title":"Sort"},"description":"Sort order: lastActive, lastActive:asc, health, health:asc, name, name:desc. Defaults to lastActive desc."},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/WorkspaceStatus"},{"type":"null"}],"description":"Filter by status (active|archived).","title":"Status"},"description":"Filter by status (active|archived)."},{"name":"visibility","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/WorkspaceVisibility"},{"type":"null"}],"description":"Filter by visibility (private|protected|public).","title":"Visibility"},"description":"Filter by visibility (private|protected|public)."},{"name":"ownerId","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by owner id.","title":"Ownerid"},"description":"Filter by owner id."},{"name":"mine","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"When true, restrict results to caller-owned workspaces.","title":"Mine"},"description":"When true, restrict results to caller-owned workspaces."},{"name":"include_aggregates","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"When true, include aggregates in the list response.","title":"Include Aggregates"},"description":"When true, include aggregates in the list response."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Workspaces"],"summary":"Create a workspace","operationId":"create_workspace_api_v1_workspaces_post","parameters":[{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workspaces/summary":{"get":{"tags":["Workspaces"],"summary":"Workspace aggregates","description":"Return total workspace count, total members, and average health.","operationId":"summarize_workspaces_api_v1_workspaces_summary_get","parameters":[{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workspaces/{workspace_id}":{"get":{"tags":["Workspaces"],"summary":"Get workspace detail","operationId":"get_workspace_api_v1_workspaces__workspace_id__get","parameters":[{"name":"workspace_id","in":"path","required":true,"schema":{"type":"string","description":"Workspace identifier.","title":"Workspace Id"},"description":"Workspace identifier."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceDetail"}}}},"403":{"description":"Caller cannot access workspace."},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/workspaces/{workspace_id}/members":{"get":{"tags":["Workspaces"],"summary":"List workspace members","operationId":"list_members_api_v1_workspaces__workspace_id__members_get","parameters":[{"name":"workspace_id","in":"path","required":true,"schema":{"type":"string","description":"Workspace identifier.","title":"Workspace Id"},"description":"Workspace identifier."},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"1-based page number.","default":1,"title":"Page"},"description":"1-based page number."},{"name":"pageSize","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Page size (max 100).","default":20,"title":"Pagesize"},"description":"Page size (max 100)."},{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional role filter: owner|admin|member.","title":"Role"},"description":"Optional role filter: owner|admin|member."},{"name":"X-User-Id","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Id"}},{"name":"X-User-Domains","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-User-Domains"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceMemberListResponse"}}}},"403":{"description":"Caller cannot access workspace."},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/connectors":{"get":{"tags":["Connectors"],"summary":"List connectors","description":"Return available connectors with status, counts, and management URLs.","operationId":"list_connectors_api_v1_connectors_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectorListResponse"}}}}}}},"/api/v1/connectors/{connector_id}/sync":{"post":{"tags":["Connectors"],"summary":"Trigger connector sync","description":"Start a sync for the specified connector. Returns updated status and retry hints.","operationId":"trigger_sync_api_v1_connectors__connector_id__sync_post","parameters":[{"name":"connectorId","in":"path","required":true,"schema":{"type":"string","description":"Identifier of the connector to sync.","title":"Connectorid"},"description":"Identifier of the connector to sync."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectorSummary"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"ConnectorListResponse":{"properties":{"connectors":{"items":{"$ref":"#/components/schemas/ConnectorSummary"},"type":"array","title":"Connectors"}},"type":"object","title":"ConnectorListResponse","description":"Response for listing available connectors."},"ConnectorStatus":{"type":"string","enum":["synced","syncing","error","never_synced"],"title":"ConnectorStatus","description":"Lifecycle status for connectors."},"ConnectorSummary":{"properties":{"id":{"type":"string","title":"Id"},"type":{"type":"string","title":"Type"},"status":{"$ref":"#/components/schemas/ConnectorStatus"},"lastSync":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Lastsync"},"itemsFound":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Itemsfound"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"authUrl":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authurl"},"manageUrl":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Manageurl"},"retryAfterSeconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Retryafterseconds"}},"type":"object","required":["id","type","status"],"title":"ConnectorSummary","description":"Minimal connector information for listings."},"EntityCounts":{"properties":{"upstream":{"type":"integer","title":"Upstream","default":0},"downstream":{"type":"integer","title":"Downstream","default":0}},"type":"object","title":"EntityCounts"},"EntityDetail":{"properties":{"id":{"type":"string","title":"Id","description":"Identifier of the canonical entity."},"name":{"type":"string","title":"Name","description":"Display name for the entity."},"type":{"type":"string","title":"Type","description":"Ontology EntityType name (e.g., Feature)."},"ownerUserId":{"type":"string","title":"Owneruserid","description":"Owner of the entity."},"visibility":{"type":"string","title":"Visibility","description":"Visibility tier controlling who can view it."},"sensitivity":{"type":"string","title":"Sensitivity","description":"Sensitivity level for the entity."},"domains":{"items":{"type":"string"},"type":"array","title":"Domains","description":"Domains/teams this entity belongs to for domain-aware visibility."},"sharedWith":{"items":{"type":"string"},"type":"array","title":"Sharedwith","description":"Specific users the entity is shared with."},"attributes":{"additionalProperties":true,"type":"object","title":"Attributes","description":"Arbitrary attribute map captured during materialization."},"lineage":{"anyOf":[{"$ref":"#/components/schemas/EntityLineage"},{"type":"null"}],"description":"Incoming and outgoing related entities for lineage views."},"counts":{"anyOf":[{"$ref":"#/components/schemas/EntityCounts"},{"type":"null"}],"description":"Aggregate counts of upstream/downstream relations for badges."},"health":{"anyOf":[{"$ref":"#/components/schemas/EntityHealth"},{"type":"null"}],"description":"Health status and alerts for the entity."}},"type":"object","required":["id","name","type","ownerUserId","visibility","sensitivity"],"title":"EntityDetail","description":"Full representation of a canonical entity with security metadata.","example":{"attributes":{"status":"draft","summary":"Shared workspaces for cross-team collaboration"},"counts":{"downstream":1,"upstream":1},"domains":["product"],"health":{"alerts":[],"status":"healthy"},"id":"feat_shared_workspaces","lineage":{"incoming":[{"id":"person_alex","relation":"OWNS","type":"Person"}],"outgoing":[{"id":"feat_child","relation":"PART_OF","type":"Feature"}]},"name":"Shared Workspaces","ownerUserId":"user_matt","sensitivity":"medium","sharedWith":["user_bob"],"type":"Feature","visibility":"team"}},"EntityHealth":{"properties":{"status":{"type":"string","title":"Status","default":"healthy"},"alerts":{"items":{"$ref":"#/components/schemas/EntityHealthAlert"},"type":"array","title":"Alerts"}},"type":"object","title":"EntityHealth"},"EntityHealthAlert":{"properties":{"id":{"type":"string","title":"Id"},"severity":{"type":"string","title":"Severity"},"message":{"type":"string","title":"Message"}},"type":"object","required":["id","severity","message"],"title":"EntityHealthAlert"},"EntityLineage":{"properties":{"incoming":{"items":{"$ref":"#/components/schemas/EntityLineageEdge"},"type":"array","title":"Incoming"},"outgoing":{"items":{"$ref":"#/components/schemas/EntityLineageEdge"},"type":"array","title":"Outgoing"}},"type":"object","title":"EntityLineage"},"EntityLineageEdge":{"properties":{"id":{"type":"string","title":"Id"},"type":{"type":"string","title":"Type"},"relation":{"type":"string","title":"Relation"}},"type":"object","required":["id","type","relation"],"title":"EntityLineageEdge"},"EntityListResponse":{"properties":{"entities":{"items":{"$ref":"#/components/schemas/EntitySummary"},"type":"array","title":"Entities","description":"Entities visible to the caller that match the supplied filters."},"total":{"type":"integer","title":"Total","description":"Total count matching filters (before pagination)."}},"type":"object","required":["total"],"title":"EntityListResponse","description":"Paginated list response for canonical entities."},"EntitySummary":{"properties":{"id":{"type":"string","title":"Id","description":"Identifier of the canonical entity."},"name":{"type":"string","title":"Name","description":"Display name for the entity."},"type":{"type":"string","title":"Type","description":"Ontology EntityType name (e.g., Feature, Person)."}},"type":"object","required":["id","name","type"],"title":"EntitySummary","description":"Lightweight projection used when listing canonical entities.","example":{"id":"feat_shared_workspaces","name":"Shared Workspaces","type":"Feature"}},"EntityType":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id","description":"Stable identifier for the entity type. If omitted on creation, derived from the name."},"name":{"type":"string","title":"Name","description":"Human-readable name of the entity type (e.g. Feature, Person)."},"namespace":{"type":"string","title":"Namespace","description":"Domain namespace used to group related types (e.g. core.product)."},"kind":{"type":"string","const":"entity","title":"Kind","description":"Kind marker that is always 'entity' for entity types.","default":"entity"},"shortDescription":{"type":"string","title":"Shortdescription","description":"One-line description used in prompts and docs."},"detailedDescription":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detaileddescription","description":"Longer guidance about when to use this type."},"scopeNote":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scopenote","description":"Clarifies boundaries and edge cases for this type."},"synonyms":{"items":{"type":"string"},"type":"array","title":"Synonyms","description":"Accepted synonyms that should map to this type."},"nonSynonyms":{"items":{"type":"string"},"type":"array","title":"Nonsynonyms","description":"Terms that look similar but should not map to this type."},"contextTags":{"items":{"type":"string"},"type":"array","title":"Contexttags","description":"Lightweight tags to filter ontology types for specific prompts or views."},"status":{"$ref":"#/components/schemas/OntologyStatus","description":"Lifecycle status controlling visibility/usage.","default":"active"}},"type":"object","required":["name","namespace","shortDescription"],"title":"EntityType","example":{"contextTags":["product","roadmap"],"detailedDescription":"Use for capabilities shipped to customers; exclude tasks/bugs.","id":"et_feature","kind":"entity","name":"Feature","namespace":"core.product","nonSynonyms":["Task","Bug"],"scopeNote":"Do not use for engineering tasks or support tickets.","shortDescription":"User-facing capability delivered by the product.","status":"active","synonyms":["Capability"]}},"EventType":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id","description":"Stable identifier for the event type; generated from the name when omitted."},"name":{"type":"string","title":"Name","description":"Human-readable event name (e.g. ApprovalEvent)."},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Purpose of the event and when it should be emitted."},"kind":{"type":"string","const":"event","title":"Kind","description":"Kind marker that is always 'event'.","default":"event"},"status":{"$ref":"#/components/schemas/OntologyStatus","description":"Lifecycle status controlling whether the type is usable.","default":"active"},"participantTypes":{"items":{"type":"string"},"type":"array","title":"Participanttypes","description":"Expected participant entity type ids (actor/target) for this event."}},"type":"object","required":["name"],"title":"EventType","example":{"description":"Decision made by an owner to approve or reject a feature.","id":"evt_approval","kind":"event","name":"ApprovalEvent","participantTypes":["et_person","et_feature"],"status":"active"}},"FeatureDeliveryView":{"properties":{"feature":{"$ref":"#/components/schemas/FeatureSummary","description":"Canonical feature node and owner."},"requirements":{"items":{"$ref":"#/components/schemas/RequirementSummary"},"type":"array","title":"Requirements","description":"List of requirements connected to the feature."},"metrics":{"items":{"$ref":"#/components/schemas/MetricSummary"},"type":"array","title":"Metrics","description":"Delivery/impact metrics linked to the feature."},"risks":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Risks","description":"Potential risks captured for this feature (structure may evolve)."}},"type":"object","required":["feature"],"title":"FeatureDeliveryView","example":{"feature":{"id":"feat_shared_workspaces","name":"Shared Workspaces","owner":{"id":"person_sarah_lee","name":"Sarah Lee"},"status":"draft"},"metrics":[{"id":"metric_workspace_adoption","name":"Workspace adoption","target":"60% of active teams use workspaces within 3 months"}],"requirements":[{"id":"req_create_workspace","name":"Users can create shared workspaces"},{"id":"req_attach_files","name":"Workspaces support file uploads"}],"risks":[]}},"FeatureOwner":{"properties":{"id":{"type":"string","title":"Id","description":"Identifier of the owner entity (usually a Person)."},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name","description":"Display name of the owner if known."}},"type":"object","required":["id"],"title":"FeatureOwner"},"FeatureSummary":{"properties":{"id":{"type":"string","title":"Id","description":"Identifier of the feature entity."},"name":{"type":"string","title":"Name","description":"Display name of the feature."},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","description":"Delivery status for the feature."},"owner":{"anyOf":[{"$ref":"#/components/schemas/FeatureOwner"},{"type":"null"}],"description":"Primary owner responsible for delivering the feature."}},"type":"object","required":["id","name"],"title":"FeatureSummary"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"InsightLayer":{"type":"string","enum":["canonical","staging","exploratory"],"title":"InsightLayer"},"InsightListResponse":{"properties":{"insights":{"items":{"$ref":"#/components/schemas/InsightSummary"},"type":"array","title":"Insights","description":"Insights visible to the caller after filters are applied."},"total":{"type":"integer","title":"Total","description":"Total insights matching filters (before pagination)."},"counts":{"items":{"$ref":"#/components/schemas/InsightStatusCount"},"type":"array","title":"Counts","description":"Aggregated counts per status for chip rendering."}},"type":"object","required":["total"],"title":"InsightListResponse","description":"Paginated response for insight listings, including chip counts."},"InsightSortOrder":{"type":"string","enum":["confidence_desc","confidence_asc","recency_desc","recency_asc"],"title":"InsightSortOrder","description":"Supported sort orders for insight listings."},"InsightSourceSummary":{"properties":{"id":{"type":"string","title":"Id","description":"Knowledge source identifier."},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","description":"Optional human-readable title for the knowledge source."}},"type":"object","required":["id"],"title":"InsightSourceSummary","description":"Lightweight projection of the knowledge source backing an insight."},"InsightStatusCount":{"properties":{"status":{"type":"string","title":"Status","description":"Lifecycle status label (e.g., new, verified)."},"count":{"type":"integer","title":"Count","description":"Number of insights matching the status."}},"type":"object","required":["status","count"],"title":"InsightStatusCount","description":"Aggregated insight counts grouped by status for chips/widgets.","example":{"count":5,"status":"verified"}},"InsightSummary":{"properties":{"id":{"type":"string","title":"Id","description":"Canonical identifier for the insight entity or fact."},"typeName":{"type":"string","title":"Typename","description":"Ontology EntityType backing the insight (e.g., Requirement)."},"content":{"type":"string","title":"Content","description":"Primary content/body of the insight."},"status":{"type":"string","title":"Status","description":"Normalized lifecycle status (e.g., verified, decided)."},"confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence","description":"Confidence score between 0-1 emitted by extraction/matching."},"source":{"anyOf":[{"$ref":"#/components/schemas/InsightSourceSummary"},{"type":"null"}],"description":"Knowledge source the insight was materialized from."},"layer":{"type":"string","title":"Layer","description":"Layer where the insight lives.","default":"canonical"},"updatedAt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Updatedat"}},"type":"object","required":["id","typeName","content","status"],"title":"InsightSummary","description":"Single insight row exposed to the Knowledge Base UI.","example":{"confidence":0.82,"content":"Shared workspaces must support guest collaborators.","id":"018f88a8-1234-7001-8001-000000000001","layer":"canonical","source":{"id":"018f88a8-9a6f-7b2e-8f7c-9d0a5f9a1234","title":"Shared Workspaces PRD"},"status":"verified","typeName":"Requirement","updatedAt":"2025-02-01T12:00:00Z"}},"KnowledgeSourceCreateRequest":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title","description":"Human-friendly name shown wherever the knowledge source appears."},"sourceType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sourcetype","description":"Origin of the content (e.g. \"upload\", \"email\", \"slack\")."},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content","description":"Raw text to ingest and process. Optional when using uploads."},"uploadToken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Uploadtoken","description":"One-time token returned by /knowledge-sources/upload when using presigned uploads."},"mimeType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mimetype","description":"MIME type supplied alongside an upload token."},"sizeBytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Sizebytes","description":"Size in bytes of the uploaded blob, if known."},"ocrEnabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Ocrenabled","description":"Opt-in flag to run OCR/text extraction on uploaded documents."},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Optional extra metadata persisted alongside the knowledge source."}},"type":"object","title":"KnowledgeSourceCreateRequest","example":{"content":"# Shared Workspaces\\nEnable teams to collaborate...","metadata":{"mimeType":"text/markdown","projectId":"proj_shared_workspaces"},"sourceType":"upload","title":"Shared Workspaces PRD"}},"KnowledgeSourceCreateResponse":{"properties":{"knowledgeSourceId":{"type":"string","title":"Knowledgesourceid","description":"Identifier assigned to the registered knowledge source."},"status":{"$ref":"#/components/schemas/KnowledgeSourceStatus","description":"Overall ingestion status at registration time (always queued)."}},"type":"object","required":["knowledgeSourceId","status"],"title":"KnowledgeSourceCreateResponse","example":{"knowledgeSourceId":"018f88a8-9a6f-7b2e-8f7c-9d0a5f9a1234","status":"queued"}},"KnowledgeSourceEvent":{"properties":{"knowledgeSourceId":{"type":"string","title":"Knowledgesourceid"},"status":{"$ref":"#/components/schemas/KnowledgeSourceStatus"},"stages":{"additionalProperties":{"$ref":"#/components/schemas/StageProgress"},"type":"object","title":"Stages"},"updatedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updatedat"},"heartbeat":{"type":"boolean","title":"Heartbeat","default":true},"retryAfterSeconds":{"type":"integer","title":"Retryafterseconds","default":15}},"type":"object","required":["knowledgeSourceId","status","stages"],"title":"KnowledgeSourceEvent","description":"Server-sent event payload for knowledge source ingestion progress."},"KnowledgeSourceListResponse":{"properties":{"knowledgeSources":{"items":{"$ref":"#/components/schemas/KnowledgeSourceSummary"},"type":"array","title":"Knowledgesources","description":"Knowledge sources visible to the caller that match supplied filters."},"total":{"type":"integer","title":"Total","description":"Total count matching filters (before pagination)."}},"type":"object","required":["total"],"title":"KnowledgeSourceListResponse","description":"Paginated list response for knowledge sources."},"KnowledgeSourceStages":{"properties":{"extraction":{"$ref":"#/components/schemas/StageProgress","description":"Extracting atoms from the knowledge source text."},"embedding":{"$ref":"#/components/schemas/StageProgress","description":"Vector embedding of extracted atoms for clustering."},"clustering":{"$ref":"#/components/schemas/StageProgress","description":"Clustering insights from embedded atoms."},"conflictChecks":{"$ref":"#/components/schemas/StageProgress","description":"Checking conflicts and finalizing materialization."}},"type":"object","title":"KnowledgeSourceStages","example":{"clustering":"pending","conflictChecks":"pending","embedding":"processing","extraction":"done"}},"KnowledgeSourceStatus":{"type":"string","enum":["queued","processing","done","error"],"title":"KnowledgeSourceStatus","description":"Lifecycle states for knowledge source ingestion and processing."},"KnowledgeSourceStatusResponse":{"properties":{"knowledgeSourceId":{"type":"string","title":"Knowledgesourceid","description":"Knowledge source identifier to query status for."},"status":{"$ref":"#/components/schemas/KnowledgeSourceStatus","description":"Current overall ingestion status derived from stage progress."},"stages":{"$ref":"#/components/schemas/KnowledgeSourceStages","description":"Per-stage breakdown showing extraction, embedding, clustering, and conflict check progress."}},"type":"object","required":["knowledgeSourceId","status","stages"],"title":"KnowledgeSourceStatusResponse","example":{"knowledgeSourceId":"018f88a8-9a6f-7b2e-8f7c-9d0a5f9a1234","stages":{"clustering":"pending","conflictChecks":"pending","embedding":"processing","extraction":"done"},"status":"processing"}},"KnowledgeSourceSummary":{"properties":{"knowledgeSourceId":{"type":"string","title":"Knowledgesourceid","description":"Identifier of the knowledge source."},"title":{"type":"string","title":"Title","description":"Human-friendly title for the knowledge source."},"sourceType":{"type":"string","title":"Sourcetype","description":"Origin of the content (e.g. \"upload\", \"email\")."},"status":{"$ref":"#/components/schemas/KnowledgeSourceStatus","description":"Overall ingestion lifecycle status."},"stages":{"$ref":"#/components/schemas/KnowledgeSourceStages","description":"Per-stage ingestion breakdown for rendering progress indicators."},"createdAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Createdat","description":"UTC timestamp when the knowledge source was registered."}},"type":"object","required":["knowledgeSourceId","title","sourceType","status","stages"],"title":"KnowledgeSourceSummary","description":"Compact representation used when listing knowledge sources.","example":{"createdAt":"2025-02-04T12:00:00Z","knowledgeSourceId":"018f88a8-9a6f-7b2e-8f7c-9d0a5f9a1234","sourceType":"upload","stages":{"clustering":"done","conflictChecks":"processing","embedding":"done","extraction":"done"},"status":"done","title":"Shared Workspaces PRD"}},"KnowledgeSourceUploadRequest":{"properties":{"mimeType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mimetype","description":"Optional MIME type requested by the client."}},"type":"object","title":"KnowledgeSourceUploadRequest","description":"Request payload for creating an upload slot with presigned URL."},"KnowledgeSourceUploadResponse":{"properties":{"uploadUrl":{"type":"string","title":"Uploadurl"},"token":{"type":"string","title":"Token"},"mimeType":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mimetype"},"expiresAt":{"type":"string","format":"date-time","title":"Expiresat"},"maxSizeBytes":{"type":"integer","title":"Maxsizebytes"},"allowedMimeTypes":{"items":{"type":"string"},"type":"array","title":"Allowedmimetypes"}},"type":"object","required":["uploadUrl","token","expiresAt","maxSizeBytes","allowedMimeTypes"],"title":"KnowledgeSourceUploadResponse","description":"Response payload containing upload URL and validation token."},"MetricSummary":{"properties":{"id":{"type":"string","title":"Id","description":"Identifier of the metric entity."},"name":{"type":"string","title":"Name","description":"Name of the metric used to track delivery."},"target":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target","description":"Optional success target, goal, or KPI description."}},"type":"object","required":["id","name"],"title":"MetricSummary"},"OntologyStatus":{"type":"string","enum":["active","draft","archived"],"title":"OntologyStatus","description":"Lifecycle status for ontology objects."},"RelationType":{"properties":{"id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id","description":"Stable identifier for the relation type (generated from the name when omitted)."},"name":{"type":"string","title":"Name","description":"Predicate name expressed in uppercase snake (e.g. OWNS, HAS_REQUIREMENT)."},"domain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Domain","description":"Optional domain grouping for this relation (e.g. product, org)."},"detailedDescription":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Detaileddescription","description":"Longer guidance about when and how to use this relation type."},"scopeNote":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Scopenote","description":"Clarifies boundaries and edge cases for this predicate."},"synonyms":{"items":{"type":"string"},"type":"array","title":"Synonyms","description":"Accepted synonyms that should map to this predicate."},"nonSynonyms":{"items":{"type":"string"},"type":"array","title":"Nonsynonyms","description":"Terms that look similar but should NOT map to this predicate."},"contextTags":{"items":{"type":"string"},"type":"array","title":"Contexttags","description":"Tags used to filter which predicates to show in prompts/views."},"kind":{"type":"string","const":"relation","title":"Kind","description":"Kind marker that is always 'relation'.","default":"relation"},"shortDescription":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Shortdescription","description":"Brief description of what the predicate conveys."},"status":{"$ref":"#/components/schemas/OntologyStatus","description":"Lifecycle status controlling whether the type is usable.","default":"active"},"connectsFrom":{"items":{"type":"string"},"type":"array","title":"Connectsfrom","description":"Allowed subject entity type ids for this predicate."},"connectsTo":{"items":{"type":"string"},"type":"array","title":"Connectsto","description":"Allowed object entity type ids for this predicate."}},"type":"object","required":["name"],"title":"RelationType","example":{"connectsFrom":["et_feature"],"connectsTo":["et_requirement"],"contextTags":["product"],"detailedDescription":"Use when a feature depends on a requirement to be true.","domain":"product","id":"rt_has_requirement","kind":"relation","name":"HAS_REQUIREMENT","nonSynonyms":["blocks"],"scopeNote":"Do not use for nice-to-have wishes; must be a gating requirement.","shortDescription":"Feature has a requirement that must be satisfied.","status":"active","synonyms":["requires"]}},"RequirementSummary":{"properties":{"id":{"type":"string","title":"Id","description":"Identifier of the requirement entity."},"name":{"type":"string","title":"Name","description":"Short statement of the requirement."}},"type":"object","required":["id","name"],"title":"RequirementSummary"},"ShareRequest":{"properties":{"entityId":{"type":"string","title":"Entityid","description":"Identifier of the entity/event to share."},"shareWithUserId":{"type":"string","title":"Sharewithuserid","description":"Recipient user id that should gain access."},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions","description":"Permission list for the recipient (e.g. [\"read\"])."}},"type":"object","required":["entityId","shareWithUserId"],"title":"ShareRequest","description":"Request payload for sharing an entity or event with another user.","example":{"entityId":"feat_shared_workspaces","permissions":["read"],"shareWithUserId":"user_alex"}},"ShareResponse":{"properties":{"entityId":{"type":"string","title":"Entityid","description":"Shared entity identifier."},"sharedWith":{"type":"string","title":"Sharedwith","description":"Recipient user id."},"status":{"type":"string","title":"Status","description":"Outcome of the share operation.","default":"ok"}},"type":"object","required":["entityId","sharedWith"],"title":"ShareResponse","description":"Response payload indicating the share result.","example":{"entityId":"feat_shared_workspaces","sharedWith":"user_alex","status":"ok"}},"StageProgress":{"properties":{"state":{"$ref":"#/components/schemas/StageStatus","description":"Lifecycle state of the stage."},"startedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Startedat"},"finishedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Finishedat"},"progressPct":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Progresspct","description":"Optional progress percentage for long-running stages."}},"type":"object","required":["state"],"title":"StageProgress","description":"Detailed per-stage progress for streaming events."},"StageStatus":{"type":"string","enum":["pending","processing","done","error"],"title":"StageStatus","description":"Per-stage lifecycle states for ingestion pipeline steps."},"StagingClusterListResponse":{"properties":{"clusters":{"items":{"$ref":"#/components/schemas/StagingClusterView"},"type":"array","title":"Clusters"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["total"],"title":"StagingClusterListResponse","description":"List response for staging clusters."},"StagingClusterView":{"properties":{"id":{"type":"string","title":"Id"},"title":{"type":"string","title":"Title"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"knowledgeSourceId":{"type":"string","title":"Knowledgesourceid"},"items":{"items":{"$ref":"#/components/schemas/StagingItem"},"type":"array","title":"Items"},"risksCount":{"type":"integer","title":"Riskscount","default":0},"conflictStatus":{"type":"string","title":"Conflictstatus","default":"pending"},"conflictCount":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Conflictcount"},"promoted":{"type":"boolean","title":"Promoted","default":false},"rejected":{"type":"boolean","title":"Rejected","default":false}},"type":"object","required":["id","title","knowledgeSourceId"],"title":"StagingClusterView","description":"Cluster representation returned by the staging API."},"StagingConflictDetail":{"properties":{"conflictsWith":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conflictswith"},"severity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity"},"resolutionHint":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolutionhint"}},"type":"object","title":"StagingConflictDetail","description":"Conflict metadata associated with a staging item."},"StagingItem":{"properties":{"id":{"type":"string","title":"Id"},"type":{"type":"string","title":"Type"},"content":{"type":"string","title":"Content"},"confidence":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Confidence"},"aiActionTaken":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Aiactiontaken"},"conflict":{"anyOf":[{"$ref":"#/components/schemas/StagingConflictDetail"},{"type":"null"}]}},"type":"object","required":["id","type","content"],"title":"StagingItem","description":"Individual staging item within a cluster."},"SuggestionDecision":{"type":"string","enum":["approve","reject","merge_into_existing"],"title":"SuggestionDecision"},"SuggestionDecisionRequest":{"properties":{"decision":{"$ref":"#/components/schemas/SuggestionDecision","description":"Decision to apply: approve, reject, or merge into an existing type."},"targetEntityTypeId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Targetentitytypeid","description":"Required when decision is merge_into_existing; id of the target type."}},"type":"object","required":["decision"],"title":"SuggestionDecisionRequest","examples":[{"decision":"approve"},{"decision":"merge_into_existing","targetEntityTypeId":"et_feature"}]},"SuggestionKind":{"type":"string","enum":["entity","relation","event"],"title":"SuggestionKind","description":"Kinds of ontology suggestions produced by matching."},"SuggestionStatus":{"type":"string","enum":["pending","approved","rejected","merged"],"title":"SuggestionStatus","description":"Lifecycle status of ontology suggestions."},"TypeSuggestion":{"properties":{"suggestionId":{"type":"string","title":"Suggestionid","description":"Unique id for the suggestion produced by matching."},"proposedName":{"type":"string","title":"Proposedname","description":"Name proposed by the model."},"kind":{"$ref":"#/components/schemas/SuggestionKind","description":"What type of ontology element this suggestion refers to."},"namespace":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Namespace","description":"Suggested namespace for the new type (if applicable)."},"proposedDescription":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Proposeddescription","description":"Model-suggested description to help reviewers decide."},"sourceKnowledgeSourceId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sourceknowledgesourceid","description":"Knowledge source that produced this suggestion."},"status":{"$ref":"#/components/schemas/SuggestionStatus","description":"Current moderation status of the suggestion.","default":"pending"},"proposedBy":{"type":"string","title":"Proposedby","description":"Identifier for the proposer (LLM or human).","default":"matching_model"},"fromTypeName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Fromtypename","description":"For relations: proposed subject entity type name (optional)."},"toTypeName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Totypename","description":"For relations: proposed object entity type name (optional)."},"createdTypeId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Createdtypeid","description":"If approved, id of the newly created ontology type."},"mergedIntoTypeId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Mergedintotypeid","description":"If merged, id of the existing ontology type it was merged into."}},"type":"object","required":["suggestionId","proposedName","kind"],"title":"TypeSuggestion","example":{"kind":"entity","namespace":"core.support","proposedBy":"matching_model","proposedDescription":"Policy defining how incidents are escalated.","proposedName":"EscalationPolicy","sourceKnowledgeSourceId":"ksrc_incident_policy","status":"pending","suggestionId":"sug_et_123"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"ValidationErrorItem":{"properties":{"field":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Field"},"code":{"type":"string","title":"Code"},"message":{"type":"string","title":"Message"}},"type":"object","required":["field","code","message"],"title":"ValidationErrorItem","description":"Single validation error entry with field/code/message."},"ValidationErrorResponse":{"properties":{"errors":{"items":{"$ref":"#/components/schemas/ValidationErrorItem"},"type":"array","title":"Errors"}},"type":"object","required":["errors"],"title":"ValidationErrorResponse","description":"Envelope for structured validation errors."},"WorkspaceAggregates":{"properties":{"totalWorkspaces":{"type":"integer","title":"Totalworkspaces"},"totalMembers":{"type":"integer","title":"Totalmembers"},"avgHealth":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avghealth","description":"Average health score across workspaces. Nullable when unavailable."}},"type":"object","required":["totalWorkspaces","totalMembers"],"title":"WorkspaceAggregates","description":"Aggregated workspace metrics for overview tiles."},"WorkspaceCreateRequest":{"properties":{"name":{"type":"string","title":"Name","description":"Workspace name."},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Optional description shown on workspace cards."},"visibility":{"$ref":"#/components/schemas/WorkspaceVisibility","description":"Visibility tier: private, protected, or public."},"ownerUserId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Owneruserid","description":"Optional owner override; defaults to caller."}},"type":"object","required":["name","visibility"],"title":"WorkspaceCreateRequest","description":"Payload to create a new workspace."},"WorkspaceDetail":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"visibility":{"$ref":"#/components/schemas/WorkspaceVisibility"},"status":{"$ref":"#/components/schemas/WorkspaceStatus"},"memberCount":{"type":"integer","title":"Membercount"},"health":{"anyOf":[{"$ref":"#/components/schemas/WorkspaceHealth"},{"type":"null"}]},"lastActive":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Lastactive","description":"Last activity timestamp; nullable when unknown."},"createdAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Createdat"},"ownerId":{"type":"string","title":"Ownerid","description":"Owner of the workspace."},"permissions":{"$ref":"#/components/schemas/WorkspacePermissions","description":"Permission flags scoped to the caller."}},"type":"object","required":["id","name","visibility","status","memberCount","ownerId"],"title":"WorkspaceDetail","description":"Workspace detail with permissions for callers.","example":{"createdAt":"2025-01-15T10:00:00Z","description":"Atlas delivery workspace","health":{"score":82,"updatedAt":"2025-02-05T12:00:00Z"},"id":"ws_shared_workspaces","lastActive":"2025-02-06T09:30:00Z","memberCount":8,"name":"Shared Workspaces","ownerId":"user_matt","status":"active","visibility":"protected"}},"WorkspaceHealth":{"properties":{"score":{"anyOf":[{"type":"integer","maximum":100.0,"minimum":0.0},{"type":"null"}],"title":"Score","description":"Health score between 0-100. Nullable when not yet computed."},"updatedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updatedat","description":"Timestamp when the health score was last refreshed."}},"type":"object","title":"WorkspaceHealth","description":"Health metric surfaced for a workspace card."},"WorkspaceListResponse":{"properties":{"workspaces":{"items":{"$ref":"#/components/schemas/WorkspaceSummary"},"type":"array","title":"Workspaces","description":"Workspaces visible to the caller after filters are applied."},"total":{"type":"integer","title":"Total","description":"Total count before pagination."},"aggregates":{"anyOf":[{"$ref":"#/components/schemas/WorkspaceAggregates"},{"type":"null"}],"description":"Optional aggregates when requested alongside the list."}},"type":"object","required":["total"],"title":"WorkspaceListResponse","description":"Paginated workspace list."},"WorkspaceMember":{"properties":{"id":{"type":"string","title":"Id"},"displayName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Displayname"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"role":{"type":"string","title":"Role","description":"Role of the member: owner|admin|member."}},"type":"object","required":["id","role"],"title":"WorkspaceMember","description":"Workspace member roster entry.","example":{"displayName":"Matt Born","email":"matt@example.com","id":"user_matt","role":"owner"}},"WorkspaceMemberListResponse":{"properties":{"members":{"items":{"$ref":"#/components/schemas/WorkspaceMember"},"type":"array","title":"Members"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["total"],"title":"WorkspaceMemberListResponse","description":"Paginated roster of workspace members."},"WorkspacePermissions":{"properties":{"canView":{"type":"boolean","title":"Canview","default":true},"canManage":{"type":"boolean","title":"Canmanage","default":false},"canInvite":{"type":"boolean","title":"Caninvite","default":false}},"type":"object","title":"WorkspacePermissions","description":"Permission flags returned on workspace detail."},"WorkspaceStatus":{"type":"string","enum":["active","archived"],"title":"WorkspaceStatus","description":"Lifecycle state for a workspace."},"WorkspaceSummary":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"visibility":{"$ref":"#/components/schemas/WorkspaceVisibility"},"status":{"$ref":"#/components/schemas/WorkspaceStatus"},"memberCount":{"type":"integer","title":"Membercount"},"health":{"anyOf":[{"$ref":"#/components/schemas/WorkspaceHealth"},{"type":"null"}]},"lastActive":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Lastactive","description":"Last activity timestamp; nullable when unknown."},"createdAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Createdat"},"ownerId":{"type":"string","title":"Ownerid","description":"Owner of the workspace."}},"type":"object","required":["id","name","visibility","status","memberCount","ownerId"],"title":"WorkspaceSummary","description":"Workspace projection for list responses.","example":{"createdAt":"2025-01-15T10:00:00Z","description":"Atlas delivery workspace","health":{"score":82,"updatedAt":"2025-02-05T12:00:00Z"},"id":"ws_shared_workspaces","lastActive":"2025-02-06T09:30:00Z","memberCount":8,"name":"Shared Workspaces","ownerId":"user_matt","status":"active","visibility":"protected"}},"WorkspaceSummaryResponse":{"properties":{"totalWorkspaces":{"type":"integer","title":"Totalworkspaces"},"totalMembers":{"type":"integer","title":"Totalmembers"},"avgHealth":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avghealth","description":"Average health score across workspaces. Nullable when unavailable."}},"type":"object","required":["totalWorkspaces","totalMembers"],"title":"WorkspaceSummaryResponse","description":"Response model for standalone summary endpoint."},"WorkspaceVisibility":{"type":"string","enum":["private","protected","public"],"title":"WorkspaceVisibility","description":"Visibility tiers for workspaces."}}},"tags":[{"name":"Ontology","description":"**Ontology Management** - Define and evolve the schema that governs knowledge extraction.\n\nThe Ontology is the vocabulary and grammar of your knowledge graph. It defines:\n\n- **Entity Types**: Categories of things (e.g., Feature, Person, Customer) that can be extracted from knowledge sources\n- **Relation Types**: Predicates connecting entities (e.g., OWNS, HAS_REQUIREMENT, ASSIGNED_TO)\n- **Event Types**: Temporal actions with actors and targets (e.g., ApprovalEvent, DeploymentEvent)\n\n**Why the Ontology matters**: When you define an Entity Type like 'Feature' with a clear description, the LLM uses that guidance during extraction to identify features in your sources. The better your Ontology, the higher quality your extracted knowledge.\n\n**Dynamic evolution**: As the platform discovers new concepts during extraction, it creates suggestions for review. Admins can approve valuable additions, reject noise, or merge similar concepts - enabling organic Ontology growth without breaking existing knowledge."},{"name":"Knowledge Ingestion","description":"**Submit knowledge sources** (files, tickets, Slack threads, emails) for multi-stage processing. Content flows through extraction → vector embedding → clustering → conflict checks/materialization so derived entities, relations, and events become part of the knowledge base while inheriting ownership and visibility from the source. Use `/api/v1/knowledge-sources` to both register new sources and list existing ingestion jobs with filters for status, source type, and title search."},{"name":"Sharing","description":"**Sharing & Access Control** - Grant fine-grained access to specific entities.\n\nBy default, entities extracted from your knowledge sources are private to you. Use sharing endpoints to collaborate by selectively granting access to teammates. Sharing is entity-specific, not source-wide."},{"name":"Feature Views","description":"**Graph Views** - Query pre-defined, use-case-specific subgraphs.\n\nViews provide structured slices of the knowledge graph optimized for specific workflows (e.g., feature delivery planning). They filter by relevance and respect access controls, showing only what you're permitted to see."},{"name":"Entities","description":"**Canonical Entities** - List and fetch resolved nodes from the unified knowledge graph.\n\nUse these APIs when you need direct access to the underlying entity records that power the Knowledge Base: search, filter, and paginate across all entities you are authorized to see, then fetch rich metadata for a specific entity to populate drawers or inspectors.\n\n- `/api/v1/entities` exposes paginated search with filters for EntityType, owner, domain, and free-text search across names/attributes.\n- `/api/v1/entities/{entityId}` returns the canonical entity with security attributes so UIs can render detail views.\n\nResults always respect ownership, visibility, and sharing semantics so downstream components can confidently render user-specific knowledge."},{"name":"Knowledge Base","description":"**Graph Insights** - Query canonical insights such as requirements or decisions along with their status, confidence, and originating knowledge source. Use these endpoints to power the Knowledge Base table and filter chips without additional round-trips."}]}